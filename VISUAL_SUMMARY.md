# IPv4 Detection - Visual Summary\n\n## ğŸ¨ What You'll See\n\n### In the Agent Console\n```\n$ python3 monitor-agent.py --token abc123 --device \"SmartMeter-01\"\n\n[*] Starting network monitoring...\n    Server: http://localhost:3000\n    Device: SmartMeter-01\n    OS: Linux\n    Refresh interval: 10s\n    Local IPv4: 192.168.1.100, 172.17.0.2    â† NEW IPv4 Detection!\n\n[10:30:45] Cycle 1: Scanning connections... Found 18 new connections\n    [18] connections reported to server\n```\n\n### In the Dashboard - Device Table\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Device Name    â”‚ Username     â”‚ Status â”‚ Connctns â”‚ Protocols â”‚ IPv4 Addresses              â”‚ IPv6 Addresses               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ SmartMeter-01  â”‚ john_doe     â”‚ Online â”‚ 24       â”‚ TCP, UDP  â”‚ [192.168.1.100] [10.0.0.50] â”‚ [fe80::1...] [2001:db8::1..]  â”‚\nâ”‚                â”‚              â”‚        â”‚          â”‚           â”‚ [+1]                        â”‚ [+2]                         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ Office-Meter   â”‚ jane_admin   â”‚ Online â”‚ 156      â”‚ TCP, UDP  â”‚ [192.168.1.200] [172.16.0.1]â”‚ None                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                                                      â†‘                             â†‘\n                                                                   BLUE BADGES                 PURPLE BADGES\n                                                                  (IPv4 Addresses)            (IPv6 Addresses)\n```\n\n### Color Scheme\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘   IPv4 Address Badge   â•‘                  â•‘   IPv6 Address Badge   â•‘\nâ•‘  (BLUE)                â•‘                  â•‘   (PURPLE)             â•‘\nâ•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘                  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘\nâ•‘  â”‚ 192.168.1.100    â”‚  â•‘                  â•‘  â”‚ fe80::1...       â”‚  â•‘\nâ•‘  â”‚ 10.0.0.50        â”‚  â•‘                  â•‘  â”‚ 2001:db8::1...   â”‚  â•‘\nâ•‘  â”‚ +1               â”‚  â•‘                  â•‘  â”‚ +2               â”‚  â•‘\nâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘                  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘\nâ•‘  Background: #EBF8FF   â•‘                  â•‘  Background: #FAF5FF   â•‘\nâ•‘  Text: #1E40AF         â•‘                  â•‘  Text: #6B21A8         â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n### In the Dashboard - Click \"View Details\"\n\n```\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘           Device Details: SmartMeter-01                    â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘                                                             â•‘\nâ•‘  Status: Online          Connections: 24                   â•‘\nâ•‘  Registered: Jan 15 2025 Last Seen: Just now              â•‘\nâ•‘                                                             â•‘\nâ•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘\nâ•‘  â”‚ IPv4 Addresses Detected:                            â”‚  â•‘\nâ•‘  â”‚  â€¢ 192.168.1.100                                    â”‚  â•‘\nâ•‘  â”‚  â€¢ 10.0.0.50                                        â”‚  â•‘\nâ•‘  â”‚  â€¢ 172.16.0.10 (and 2 more)                        â”‚  â•‘\nâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘\nâ•‘                                                             â•‘\nâ•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘\nâ•‘  â”‚ IPv6 Addresses Detected:                            â”‚  â•‘\nâ•‘  â”‚  â€¢ fe80::1                                          â”‚  â•‘\nâ•‘  â”‚  â€¢ 2001:db8::1                                      â”‚  â•‘\nâ•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘\nâ•‘                                                             â•‘\nâ•‘  Protocols: TCP, UDP                                       â•‘\nâ•‘                                                             â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n### API Response Structure\n\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"user123\",\n      \"deviceName\": \"SmartMeter-01\",\n      \"username\": \"john_doe\",\n      \"status\": \"online\",\n      \"connectionCount\": 24,\n      \"protocols\": [\"TCP\", \"UDP\"],\n      \n      \"ipv4Addresses\": [              â† NEW! IPv4 only\n        \"192.168.1.100\",\n        \"10.0.0.50\",\n        \"172.16.0.10\"\n      ],\n      \n      \"ipv6Addresses\": [              â† NEW! IPv6 only\n        \"fe80::1\",\n        \"2001:db8::1\"\n      ],\n      \n      \"uniqueIps\": [                  â† Old field (backward compatible)\n        \"192.168.1.100\",\n        \"10.0.0.50\",\n        \"172.16.0.10\",\n        \"fe80::1\",\n        \"2001:db8::1\"\n      ],\n      \n      \"lastSeen\": \"2025-01-15T14:30:00Z\",\n      \"registeredAt\": \"2025-01-15T10:30:00Z\"\n    }\n  ]\n}\n```\n\n### System Flow Diagram\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   AGENT STARTUP                 â”‚\nâ”‚ python3 monitor-agent.py        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ IPv4 Detection                  â”‚\nâ”‚ Windows: ipconfig               â”‚\nâ”‚ Linux: hostname -I              â”‚\nâ”‚ macOS: ifconfig                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Display in Console              â”‚\nâ”‚ \"Local IPv4: 192.168.1.100,     â”‚\nâ”‚             172.17.0.2\"         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Scan Network Connections        â”‚\nâ”‚ Extract: sourceIp, destIp       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n        (HTTP POST)\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ /api/monitor/connections        â”‚\nâ”‚ Store sourceIp, destIp          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n      (5-second auto-refresh)\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ /api/dashboard/users (GET)      â”‚\nâ”‚ Filter IPv4 vs IPv6             â”‚\nâ”‚ Return separate arrays          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n        (HTTP GET)\n             â”‚\n             â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ React Components                â”‚\nâ”‚ Dashboard.tsx                   â”‚\nâ”‚ UserTable.tsx                   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n             â”‚\n             â–¼\n     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â”‚ Blue Badges   â”‚      Purple Badges\n     â”‚ (IPv4)        â”‚      (IPv6)\n     â”‚ 192.168.1.100 â”‚      fe80::1...\n     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      2001:db8::1...\n```\n\n## ğŸ”„ Complete Workflow\n\n```\nSTEP 1: Start Dashboard Server\n$ npm run dev\nâœ“ Dashboard running at http://localhost:3000\n\n                              â†“\n\nSTEP 2: Run Monitoring Agent\n$ python3 agent/monitor-agent.py --token YOUR_TOKEN --device \"Device1\"\n\nâœ“ Output shows:\n  Local IPv4: 192.168.1.100, 172.17.0.2\n\n                              â†“\n\nSTEP 3: Open Dashboard in Browser\nhttp://localhost:3000\n\nâœ“ Login with credentials\n\n                              â†“\n\nSTEP 4: View Monitored Devices Table\n\nâœ“ See \"IPv4 Addresses\" column with blue badges\nâœ“ See \"IPv6 Addresses\" column with purple badges\nâœ“ Table auto-refreshes every 5 seconds\n\n                              â†“\n\nSTEP 5: Click \"View Details\" on Device\n\nâœ“ See full list of all IPv4 addresses\nâœ“ See full list of all IPv6 addresses\nâœ“ See connection statistics and protocols\n\n                              â†“\n\nDONE! âœ“ IPv4 Detection Working\n```\n\n## ğŸ“Š Data Flow Overview\n\n```\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚   Device/Agent   â”‚\n                    â”‚ Windows/Linux    â”‚\n                    â”‚ macOS            â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                  Detects IPv4 at startup:\n                  {192.168.1.100, 172.17.0.2}\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚ Scan Connections â”‚\n                    â”‚ Extract IPs:     â”‚\n                    â”‚ sourceIp         â”‚\n                    â”‚ destIp           â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚   Backend API    â”‚\n                    â”‚  Filter IPv4     â”‚\n                    â”‚  Filter IPv6     â”‚\n                    â”‚ Return both sets â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚\n                             â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  React Dashboard â”‚\n                    â”‚ Blue badges:     â”‚\n                    â”‚   IPv4 Addrs     â”‚\n                    â”‚ Purple badges:   â”‚\n                    â”‚   IPv6 Addrs     â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## âœ… Verification Checklist\n\n- [ ] Agent console shows \"Local IPv4: ...\" on startup\n- [ ] Dashboard loads and shows devices table\n- [ ] \"IPv4 Addresses\" column visible (blue badges)\n- [ ] \"IPv6 Addresses\" column visible (purple badges)\n- [ ] Click \"View Details\" shows full IP lists\n- [ ] Table auto-refreshes every 5 seconds\n- [ ] Multiple devices show their own IPs\n- [ ] IPv4 validation works (no invalid IPs shown)\n\n## ğŸ¯ Key Takeaways\n\nâœ¨ **Agent**: Detects IPv4 at startup, shows in console\nâœ¨ **API**: Filters and returns IPv4 + IPv6 separately  \nâœ¨ **Dashboard**: Blue badges for IPv4, purple for IPv6\nâœ¨ **Result**: Clear, color-coded IP visibility\nâœ¨ **Compatible**: Works with all existing systems\n\n---\n\n**Everything is working! Enjoy IPv4 address detection! ğŸ‰**\n"